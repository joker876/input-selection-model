!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("InputSelectionModel",[],e):"object"==typeof exports?exports.InputSelectionModel=e():t.InputSelectionModel=e()}(self,(()=>(()=>{"use strict";var t={621:()=>{Array.prototype.last=function(t,e){return null==t?this[this.length-1]:1==t?this.filter(null!=e?e:()=>!0).last():this.filter(null!=e?e:()=>!0).slice(-t)},Array.prototype.first=function(t,e){return null==t?this[0]:1==t?this.filter(null!=e?e:()=>!0)[0]:this.filter(null!=e?e:()=>!0).slice(0,t)}}},e={};function r(s){var n=e[s];if(void 0!==n)return n.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,r),i.exports}r.d=(t,e)=>{for(var s in e)r.o(e,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};return(()=>{r.r(s),r.d(s,{SelectionCoordinates:()=>o,SelectionDirection:()=>n,SelectionModel:()=>i,caretPosToLineColumn:()=>t,lineColumnToCaretPos:()=>e,posToRange:()=>d});r(621);function t(t,e){let r=t.substring(0,e).split("\n");return{line:r.length-1,col:r.last().length}}function e(t,e){if(e.line<0)return 0;let r=t.split("\n");if(e.line>=r.length)return t.length;let s=0;for(let t=0;t<r.length;t++){const n=r[t];if(e.line==t){return s+Math.min(e.col,n.length)}s+=n.length+1}return s}const n={None:"none",Forward:"forward",Backward:"backward"};class i{constructor(t){var e,r;this.previous={start:-1,end:-1},"number"==typeof t&&(t={start:t,end:t}),this.start=null!==(e=null==t?void 0:t.start)&&void 0!==e?e:-1,this.end=null!==(r=null==t?void 0:t.end)&&void 0!==r?r:-1}
//! selection direction
get direction(){return this.start>this.end?"backward":this.start==this.end?"none":"forward"}
//! checking for relative position
isInSelection(t){const{start:e,end:r}=this.getOrdered();return t>=e&&t<=r}isBeforeSelection(t){const{start:e}=this.getOrdered();return t<=e}isAfterSelection(t){const{end:e}=this.getOrdered();return t>=e}
//! getters
get(){return{start:this.start,end:this.end}}getOrdered(){return"backward"==this.direction?{start:this.end,end:this.start}:this.get()}getPrevious(){return{start:this.previous.start,end:this.previous.end}}get size(){const{start:t,end:e}=this.getOrdered();return e-t}set(t,e){"number"==typeof t&&(t={start:t,end:t}),"backward"===e&&(t={start:t.end,end:t.start}),this._storePrevious(),this.start=t.start,this.end=t.end}expand(t){"number"==typeof t&&(t={start:t,end:t}),this._storePrevious(),t.start<this.start&&(this.start=t.start),t.end>this.end&&(this.end=t.end)}setEnd(t){this._storePrevious(),this.end=t}offset(t){if("number"==typeof t&&(t={start:t,end:t}),this._storePrevious(),"backward"==this.direction)return this.start+=t.end,void(this.end+=t.start);this.start+=t.start,this.end+=t.end}_storePrevious(){this.previous.start=this.start,this.previous.end=this.end}save(){this._savedSelection={start:this.start,end:this.end},this._savedPrevSelection={start:this.previous.start,end:this.previous.end}}restore(){this._savedSelection&&(this.previous.start=this._savedPrevSelection.start,this.previous.end=this._savedPrevSelection.end,this.start=this._savedSelection.start,this.end=this._savedSelection.end,this._savedSelection=void 0,this._savedPrevSelection=void 0)}}class o{constructor(){this.start={line:0,col:0},this.end={line:0,col:0},this.direction="none"}generate(e,r){this.start=t(r,e.start),this.end=t(r,e.end),this.direction=e.direction}get(){return{start:this.start,end:this.end}}getOrdered(){return"backward"==this.direction?{start:this.end,end:this.start}:this.get()}}function d(t){return"number"==typeof t?{start:t,end:t}:t}})(),s})()));